# Руководство по устранению проблем с БД (для фронтенда)

Этот документ содержит базовый чек-лист для диагностики проблем, которые могут выглядеть как ошибки фронтенда, но на самом деле связаны с данными или логикой на бэкенде.

---

## 1. "Не могу войти" / "Выкидывает из аккаунта"

-   **Проблема:** Пользователь не может войти с верными данными, или его сессия завершается при входе с другого устройства.
-   **Вероятная причина на бэкенде:** Проблема с логикой создания/проверки JWT токенов или с управлением сессиями в таблице `UserSessions`.
-   **Диагностика:** Проверить ответ от `POST /api/v1/auth/login`. Убедиться, что он содержит `accessToken`, `refreshToken` и объект `user`.

## 2. "Данные в профиле/виджете не обновляются"

-   **Проблема:** После изменения данных (например, вступления в команду) информация в профиле или виджете "Мои команды" не меняется.
-   **Вероятная причина на бэкенде:** Эндпоинт (`GET /users/me` или `GET /users/{user_id}`) не делает правильный JOIN с нужными таблицами (`team_members`, `player_profiles`) или не возвращает обновленные данные.
-   **Диагностика:** Сделать прямой запрос к API и проверить, содержит ли ответ ожидаемые вложенные объекты (например, массив `teams`).

## 3. "Не могу подать заявку / Отправил заявку, но ничего не происходит"

-   **Проблема:** Кнопка "Подать заявку" неактивна, или после нажатия заявка не появляется у капитана.
-   **Вероятная причина на бэкенде:** Ошибка в логике эндпоинтов `/apply` или `/applications`. Возможно, неверно обрабатывается `userId` из токена или не создается запись в таблице `TeamApplications`.
-   **Диагностика:** Проверить ответ от `POST /api/v1/teams/{team_id}/apply`.

---

**Основное правило:** Если UI выглядит корректно, но данные не загружаются, не сохраняются или отображаются неверно, в первую очередь следует проверить ответ от соответствующего API-эндпоинта, описанного в `docs/API_REFERENCE.md`.
