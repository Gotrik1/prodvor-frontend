# ProDvor - Техническая документация

Этот документ описывает архитектуру, технологии и соглашения, принятые в проекте ProDvor. Цель этой документации — обеспечить единое понимание структуры проекта для всех разработчиков и упростить процесс добавления нового функционала.

## 1. Стек технологий

- **Фреймворк:** [Next.js](https://nextjs.org/) (App Router)
- **Язык:** [TypeScript](https://www.typescriptlang.org/)
- **UI-компоненты:** [ShadCN/UI](https://ui.shadcn.com/)
- **Стилизация:** [Tailwind CSS](https://tailwindcss.com/)
- **AI-интеграции:** [Genkit (Firebase AI)](https://firebase.google.com/docs/genkit)
- **Формы:** [React Hook Form](https://react-hook-form.com/) + [Zod](https://zod.dev/)

## 2. Архитектура проекта

Проект структурирован по принципам, близким к **Feature-Sliced Design (FSD)**, что обеспечивает слабую связанность модулей и высокую переиспользуемость кода.

### Ключевые директории:

- **`/src/app`**
  - **Назначение:** Основа роутинга в Next.js App Router. Здесь определяются URL-адреса и привязываются к ним компоненты страниц.
  - **Содержимое:**
    - `layout.tsx`: Корневой макет приложения.
    - `globals.css`: Глобальные стили и переменные Tailwind CSS.
    - `page.tsx`: Главная страница.
    - `/[route]/page.tsx`: Файлы и папки, определяющие маршруты приложения (например, `/dashboard`, `/auth`).
    - `actions.ts`: Серверные действия (Server Actions), используемые на клиенте.

- **`/src/views`**
  - **Назначение:** "Сборка" страниц из виджетов. Компоненты в этой директории не содержат собственной логики, а только композируют виджеты и мелкие UI-элементы для отображения конкретной страницы.
  - **Пример:** `HomePage` (`/src/views/home/ui/index.tsx`) собирает шапку, подвал и различные контентные блоки (виджеты) для главной страницы.

- **`/src/widgets`**
  - **Назначение:** Крупные, самостоятельные и переиспользуемые блоки интерфейса. Виджеты могут иметь свою логику и состояние.
  - **Пример:** `DashboardSidebar`, `LogoGeneratorWidget`, `DashboardFeed`. Каждый из этих виджетов представляет собой законченный функциональный блок.

- **`/src/shared`**
  - **Назначение:** Самый нижний слой архитектуры. Содержит код, который может быть использован в любой части приложения.
  - **Подпапки:**
    - `api`: Клиентские функции для вызова AI-агентов (Genkit flows).
    - `ui`: Базовые UI-компоненты (кнопки, поля ввода, карточки) из ShadCN/UI.
    - `lib`: Вспомогательные утилиты (например, `cn` для классов).
    - `hooks`: Переиспользуемые React-хуки (например, `useToast`).

- **`/src/mocks`**
  - **Назначение:** Хранилище тестовых (моковых) данных. Это позволяет разрабатывать и тестировать UI независимо от готовности бэкенда.
  - **Структура:** Данные разделены по сущностям (`users.ts`, `teams.ts`). Файл `index.ts` экспортирует все моки для удобного импорта.
  - **Использование:** Компоненты импортируют данные из этой папки на этапе разработки. В будущем эти импорты будут заменены на реальные API-вызовы.

- **`/public`**
  - **Назначение:** Хранилище статических ассетов, таких как изображения, иконки и шрифты. Файлы из этой папки доступны по корневому URL (например, `/images/logo.png`).

## 3. Процесс разработки

### Как добавить новую страницу?

1.  **Создать папку** в `/src/app/new-page-name`.
2.  **Создать файл** `page.tsx` внутри этой папки.
3.  **Создать компонент-представление** в `/src/views/new-page-name/ui/index.tsx`.
4.  **Собрать страницу** в `.../views/new-page-name/ui/index.tsx`, используя необходимые виджеты из `/src/widgets` и UI-элементы из `/src/shared/ui`.
5.  **Импортировать и отрендерить** компонент-представление в `/src/app/new-page-name/page.tsx`.

### Работа с данными

На текущем этапе для отображения данных используются моки из `src/mocks`.

```typescript
// Пример использования моков в компоненте
import { posts } from '@/mocks/posts';

function PostFeed() {
  // ...
  return posts.map(post => <PostCard key={post.id} data={post} />);
}
```

В будущем, для перехода на реальный бэкенд, потребуется:
1.  Создать функции для API-запросов (например, в `src/shared/api`).
2.  Заменить импорт моковых данных на вызов этих функций.

### Работа с AI-функциями (Genkit)

- Все AI-потоки (flows) определяются в `src/shared/api/`.
- Каждый flow находится в своем файле (например, `generate-news-digest.ts`).
- Клиентские компоненты вызывают эти flows через Server Actions, определенные в `src/app/actions.ts`.

## 4. Доступные скрипты

- `npm run dev` — запуск сервера для разработки.
- `npm run build` — сборка продакшн-версии приложения.
- `npm run start` — запуск продакшн-сервера.
- `npm run lint` — проверка кода с помощью ESLint.
