{
  "swagger": "2.0",
  "info": {
    "title": "Sport Matching API",
    "description": "A RESTful API for a sports team and player matching platform.",
    "version": "1.0.0"
  },
  "schemes": [
    "http",
    "https"
  ],
  "securityDefinitions": {
    "Bearer": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header",
      "description": "JWT Authorization header using the Bearer scheme. Example: \"Authorization: Bearer {token}\""
    }
  },
  "paths": {
    "/": {
      "get": {
        "tags": [
          "Index"
        ],
        "summary": "Redirect to API docs",
        "responses": {
          "302": {
            "description": "Redirect to /apidocs/"
          }
        }
      }
    },
    "/openapi.json": {
      "get": {
        "tags": [
          "Index"
        ],
        "summary": "Serve the static openapi.json file",
        "responses": {
          "200": {
            "description": "The openapi.json file"
          },
          "404": {
            "description": "File not found"
          }
        }
      }
    },
    "/api/v1/": {
      "get": {
        "tags": [
          "Legacy"
        ],
        "summary": "Legacy Index",
        "responses": {
          "200": {
            "description": "Welcome message"
          }
        }
      }
    },
    "/api/v1/auth/register": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Register a new user",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "email",
                "password",
                "nickname",
                "role"
              ],
              "properties": {
                "email": {
                  "type": "string",
                  "description": "User's email",
                  "example": "user@example.com"
                },
                "password": {
                  "type": "string",
                  "description": "User's password",
                  "example": "password123"
                },
                "nickname": {
                  "type": "string",
                  "description": "User's nickname",
                  "example": "MyNickname"
                },
                "role": {
                  "type": "string",
                  "description": "User's role",
                  "example": "Игрок"
                },
                "city": {
                  "type": "string",
                  "description": "User's city",
                  "example": "Москва"
                },
                "firstName": {
                  "type": "string",
                  "description": "User's first name",
                  "example": "Иван"
                },
                "lastName": {
                  "type": "string",
                  "description": "User's last name",
                  "example": "Иванов"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "User registered successfully"
          },
          "400": {
            "description": "Missing data"
          },
          "409": {
            "description": "Email or nickname already exists"
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Login a user",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "email",
                "password"
              ],
              "properties": {
                "email": {
                  "type": "string",
                  "description": "User's email",
                  "example": "user@example.com"
                },
                "password": {
                  "type": "string",
                  "description": "User's password",
                  "example": "password123"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User logged in successfully"
          },
          "400": {
            "description": "Missing email or password"
          },
          "401": {
            "description": "Invalid credentials"
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Refresh access token",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "refreshToken"
              ],
              "properties": {
                "refreshToken": {
                  "type": "string",
                  "description": "The refresh token"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Access token refreshed successfully"
          },
          "400": {
            "description": "Missing refresh token"
          },
          "401": {
            "description": "Invalid or expired refresh token"
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Logout a user",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "refreshToken"
              ],
              "properties": {
                "refreshToken": {
                  "type": "string",
                  "description": "The refresh token"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User logged out successfully"
          },
          "400": {
            "description": "Missing refresh token"
          }
        }
      }
    },
    "/api/v1/users": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get all users",
        "responses": {
          "200": {
            "description": "Returns a list of all users"
          }
        }
      },
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Create a new user",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "nickname",
                "email",
                "role",
                "city",
                "firstName",
                "lastName",
                "password"
              ],
              "properties": {
                "nickname": {
                  "type": "string"
                },
                "email": {
                  "type": "string"
                },
                "password": {
                  "type": "string"
                },
                "role": {
                  "type": "string"
                },
                "city": {
                  "type": "string"
                },
                "firstName": {
                  "type": "string"
                },
                "lastName": {
                  "type": "string"
                },
                "age": {
                  "type": "integer"
                },
                "gender": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "User created successfully"
          },
          "400": {
            "description": "Missing data or nickname/email already exists"
          }
        }
      }
    },
    "/api/v1/users/me": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get current user",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "The user's JWT token.",
            "required": true,
            "type": "string",
            "default": "Bearer YOUR_JWT_TOKEN"
          },
          {
            "name": "include_teams",
            "in": "query",
            "description": "Include teams in the response",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "include_follows",
            "in": "query",
            "description": "Include followed teams in the response",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "Returns the current user"
          }
        }
      }
    },
    "/api/v1/users/{user_id}": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get a user by ID",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "include_teams",
            "in": "query",
            "description": "Include teams in the response",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "include_follows",
            "in": "query",
            "description": "Include followed teams in the response",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "Returns a single user"
          },
          "404": {
            "description": "User not found"
          }
        }
      },
      "put": {
        "tags": [
          "Users"
        ],
        "summary": "Update a user",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "nickname": {
                  "type": "string"
                },
                "email": {
                  "type": "string"
                },
                "firstName": {
                  "type": "string"
                },
                "lastName": {
                  "type": "string"
                },
                "city": {
                  "type": "string"
                },
                "gender": {
                  "type": "string"
                },
                "age": {
                  "type": "integer"
                },
                "phone": {
                  "type": "string"
                },
                "bio": {
                  "type": "string"
                },
                "avatarUrl": {
                  "type": "string"
                },
                "coverImageUrl": {
                  "type": "string"
                },
                "sports": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User updated successfully"
          },
          "400": {
            "description": "No data provided or nickname/email already exists"
          },
          "404": {
            "description": "User not found"
          }
        }
      }
    },
    "/api/v1/users/{user_id}/avatar": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Upload an avatar for a user",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "in": "formData",
            "name": "avatar",
            "type": "file",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Avatar uploaded successfully"
          },
          "400": {
            "description": "No avatar file provided"
          },
          "500": {
            "description": "An internal error occurred during avatar upload"
          }
        }
      }
    },
    "/api/v1/users/{user_id}/cover": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Upload a cover image for a user",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "in": "formData",
            "name": "cover",
            "type": "file",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Cover image uploaded successfully"
          },
          "400": {
            "description": "No cover file provided"
          },
          "500": {
            "description": "An internal error occurred during cover upload"
          }
        }
      }
    },
    "/api/v1/teams": {
      "get": {
        "tags": [
          "Teams"
        ],
        "summary": "Get all teams",
        "parameters": [
          {
            "name": "city",
            "in": "query",
            "type": "string",
            "description": "Filter by city",
            "required": false
          },
          {
            "name": "sort_by",
            "in": "query",
            "type": "string",
            "description": "Sort by attribute (name, followers, rank, createdAt)",
            "required": false
          },
          {
            "name": "order",
            "in": "query",
            "type": "string",
            "description": "Sort order (asc, desc)",
            "required": false
          },
          {
            "name": "limit",
            "in": "query",
            "type": "integer",
            "description": "Limit number of results",
            "required": false
          },
          {
            "name": "expand",
            "in": "query",
            "type": "string",
            "description": "Expand members",
            "required": false
          }
        ],
        "responses": {
          "200": {
            "description": "Returns a list of all teams"
          }
        }
      },
      "post": {
        "tags": [
          "Teams"
        ],
        "security": [
          {
            "Bearer": []
          }
        ],
        "summary": "Create a new team",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "name",
                "sport_id",
                "city"
              ],
              "properties": {
                "name": {
                  "type": "string"
                },
                "sport_id": {
                  "type": "string"
                },
                "city": {
                  "type": "string"
                },
                "logoUrl": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Team created successfully"
          },
          "400": {
            "description": "Missing data"
          }
        }
      }
    },
    "/api/v1/teams/{team_id}": {
      "get": {
        "tags": [
          "Teams"
        ],
        "summary": "Get a team by ID",
        "parameters": [
          {
            "name": "team_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Returns a single team"
          },
          "404": {
            "description": "Team not found"
          }
        }
      }
    },
    "/api/v1/teams/{team_id}/apply": {
      "post": {
        "tags": [
          "Teams"
        ],
        "security": [
          {
            "Bearer": []
          }
        ],
        "summary": "Apply to a team",
        "parameters": [
          {
            "name": "team_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Application sent successfully"
          },
          "400": {
            "description": "You have already applied or are a member"
          }
        }
      }
    },
    "/api/v1/teams/{team_id}/applications": {
      "get": {
        "tags": [
          "Teams"
        ],
        "security": [
          {
            "Bearer": []
          }
        ],
        "summary": "Get team applications",
        "parameters": [
          {
            "name": "team_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Returns a list of applicants"
          },
          "403": {
            "description": "Forbidden"
          }
        }
      }
    },
    "/api/v1/teams/{team_id}/applications/{user_id}/respond": {
      "post": {
        "tags": [
          "Teams"
        ],
        "security": [
          {
            "Bearer": []
          }
        ],
        "summary": "Respond to a team application",
        "parameters": [
          {
            "name": "team_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "action"
              ],
              "properties": {
                "action": {
                  "type": "string",
                  "description": "accept or decline"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Response sent successfully"
          },
          "400": {
            "description": "Invalid action"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Application not found"
          }
        }
      }
    },
    "/api/v1/teams/{team_id}/members/{user_id}": {
      "delete": {
        "tags": [
          "Teams"
        ],
        "security": [
          {
            "Bearer": []
          }
        ],
        "summary": "Remove a team member",
        "parameters": [
          {
            "name": "team_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Member removed successfully"
          },
          "400": {
            "description": "Captain cannot remove themselves"
          },
          "403": {
            "description": "Only the captain can remove members"
          },
          "404": {
            "description": "Team or member not found"
          }
        }
      }
    },
    "/api/v1/teams/{team_id}/follow": {
      "post": {
        "tags": [
          "Teams"
        ],
        "summary": "Toggle follow a team",
        "security": [
          {
            "Bearer": []
          }
        ],
        "parameters": [
          {
            "name": "team_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Follow status toggled"
          },
          "404": {
            "description": "Team or user not found"
          }
        }
      }
    },
    "/api/v1/sports/": {
      "get": {
        "tags": [
          "Sports"
        ],
        "summary": "Get all sports",
        "responses": {
          "200": {
            "description": "A list of sports.",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "isTeamSport": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sports": {
      "post": {
        "tags": [
          "Sports"
        ],
        "summary": "Create a new sport",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "name",
                "isTeamSport"
              ],
              "properties": {
                "name": {
                  "type": "string"
                },
                "isTeamSport": {
                  "type": "boolean"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Sport created successfully"
          },
          "400": {
            "description": "Missing name or isTeamSport, or sport with this name already exists"
          }
        }
      }
    },
    "/api/v1/users/me/sessions": {
      "get": {
        "tags": [
          "Sessions"
        ],
        "summary": "Get all active sessions for the current user",
        "security": [
          {
            "Bearer": []
          }
        ],
        "responses": {
          "200": {
            "description": "A list of active user sessions.",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "integer"
                  },
                  "userAgent": {
                    "type": "string"
                  },
                  "ipAddress": {
                    "type": "string"
                  },
                  "isCurrent": {
                    "type": "boolean"
                  },
                  "createdAt": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "lastActiveAt": {
                    "type": "string",
                    "format": "date-time"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/me/sessions/{session_id}": {
      "delete": {
        "tags": [
          "Sessions"
        ],
        "summary": "Delete a specific session",
        "security": [
          {
            "Bearer": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "The ID of the session to delete.",
            "required": true,
            "type": "integer"
          }
        ],
        "responses": {
          "200": {
            "description": "Session deleted successfully."
          },
          "400": {
            "description": "Cannot delete the currently active session."
          },
          "404": {
            "description": "Session not found or permission denied."
          }
        }
      }
    },
    "/api/v1/users/me/sessions/all-except-current": {
      "delete": {
        "tags": [
          "Sessions"
        ],
        "summary": "Delete all sessions except the current one",
        "security": [
          {
            "Bearer": []
          }
        ],
        "responses": {
          "200": {
            "description": "All other sessions have been deleted."
          }
        }
      }
    },
    "/api/v1/tournaments": {
      "get": {
        "tags": [
          "Legacy - Tournaments"
        ],
        "summary": "Get all tournaments",
        "responses": {
          "200": {
            "description": "A list of tournaments"
          }
        }
      },
      "post": {
        "tags": [
          "Legacy - Tournaments"
        ],
        "summary": "Create a new tournament",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "name",
                "game",
                "status",
                "maxParticipants",
                "startDate"
              ],
              "properties": {
                "name": {
                  "type": "string"
                },
                "game": {
                  "type": "string"
                },
                "status": {
                  "type": "string"
                },
                "maxParticipants": {
                  "type": "integer"
                },
                "startDate": {
                  "type": "string",
                  "format": "date-time"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Tournament created successfully"
          },
          "400": {
            "description": "Missing data"
          }
        }
      }
    },
    "/api/v1/tournaments/{tournament_id}": {
      "get": {
        "tags": [
          "Legacy - Tournaments"
        ],
        "summary": "Get a specific tournament",
        "parameters": [
          {
            "name": "tournament_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "A single tournament"
          },
          "404": {
            "description": "Tournament not found"
          }
        }
      }
    },
    "/api/v1/posts": {
      "get": {
        "tags": [
          "Legacy - Posts"
        ],
        "summary": "Get all posts",
        "responses": {
          "200": {
            "description": "A list of posts"
          }
        }
      },
      "post": {
        "tags": [
          "Legacy - Posts"
        ],
        "summary": "Create a new post",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "authorId",
                "content"
              ],
              "properties": {
                "authorId": {
                  "type": "integer"
                },
                "content": {
                  "type": "string"
                },
                "teamId": {
                  "type": "integer"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Post created successfully"
          },
          "400": {
            "description": "Missing data"
          },
          "404": {
            "description": "Author or Team not found"
          }
        }
      }
    },
    "/api/v1/posts/{post_id}/comments": {
      "get": {
        "tags": [
          "Legacy - Posts"
        ],
        "summary": "Get all comments for a post",
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "A list of comments for a post"
          },
          "404": {
            "description": "Post not found"
          }
        }
      },
      "post": {
        "tags": [
          "Legacy - Posts"
        ],
        "summary": "Create a new comment on a post",
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "authorId",
                "text"
              ],
              "properties": {
                "authorId": {
                  "type": "integer"
                },
                "text": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Comment created successfully"
          },
          "400": {
            "description": "Missing data"
          },
          "404": {
            "description": "Post or Author not found"
          }
        }
      }
    },
    "/api/v1/playgrounds": {
      "get": {
        "tags": [
          "Legacy - Playgrounds"
        ],
        "summary": "Get all playgrounds",
        "responses": {
          "200": {
            "description": "A list of playgrounds"
          }
        }
      },
      "post": {
        "tags": [
          "Legacy - Playgrounds"
        ],
        "summary": "Create a new playground",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "name",
                "address",
                "type",
                "surface"
              ],
              "properties": {
                "name": {
                  "type": "string"
                },
                "address": {
                  "type": "string"
                },
                "type": {
                  "type": "string"
                },
                "surface": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Playground created successfully"
          },
          "400": {
            "description": "Missing data"
          }
        }
      }
    },
    "/api/v1/quests": {
      "get": {
        "tags": [
          "Legacy - Quests"
        ],
        "summary": "Get all quests",
        "responses": {
          "200": {
            "description": "A list of quests"
          }
        }
      }
    },
    "/api/v1/achievements": {
      "get": {
        "tags": [
          "Legacy - Achievements"
        ],
        "summary": "Get all achievements",
        "responses": {
          "200": {
            "description": "A list of achievements"
          }
        }
      }
    },
    "/api/v1/sponsors": {
      "get": {
        "tags": [
          "Legacy - Sponsors"
        ],
        "summary": "Get all sponsors",
        "responses": {
          "200": {
            "description": "A list of sponsors"
          }
        }
      },
      "post": {
        "tags": [
          "Legacy - Sponsors"
        ],
        "summary": "Create a new sponsor",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "name",
                "logoUrl",
                "contribution"
              ],
              "properties": {
                "name": {
                  "type": "string"
                },
                "logoUrl": {
                  "type": "string"
                },
                "contribution": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Sponsor created successfully"
          },
          "400": {
            "description": "Missing data"
          }
        }
      }
    },
    "/api/v1/profiles/player": {
      "get": {
        "tags": [
          "Legacy - Profiles"
        ],
        "summary": "Get all player profiles",
        "responses": {
          "200": {
            "description": "A list of player profiles"
          }
        }
      }
    },
    "/api/v1/profiles/referee": {
      "get": {
        "tags": [
          "Legacy - Profiles"
        ],
        "summary": "Get all referee profiles",
        "responses": {
          "200": {
            "description": "A list of referee profiles"
          }
        }
      }
    },
    "/api/v1/profiles/coach": {
      "get": {
        "tags": [
          "Legacy - Profiles"
        ],
        "summary": "Get all coach profiles",
        "responses": {
          "200": {
            "description": "A list of coach profiles"
          }
        }
      }
    }
  },
  "definitions": {}
}
