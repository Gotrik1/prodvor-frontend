{
  "swagger": "2.0",
  "info": {
    "title": "ProDvor API",
    "description": "API for the ProDvor platform.",
    "version": "1.0.0"
  },
  "paths": {
    "/api/v1/auth/login": {
      "post": {
        "summary": "User Login (JWT)",
        "tags": [
          "Auth"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "email": {
                  "type": "string",
                  "description": "User's email"
                },
                "password": {
                  "type": "string",
                  "description": "User's password"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful login",
            "schema": {
              "$ref": "#/definitions/LoginResponse"
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/v1/auth/register": {
      "post": {
        "summary": "Register a new user",
        "tags": [
          "Auth"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/NewUser"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "User created successfully",
            "schema": {
              "$ref": "#/definitions/User"
            }
          },
          "400": {
            "description": "Bad request"
          },
          "409": {
            "description": "Conflict"
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "summary": "Refresh access token",
        "tags": [
          "Auth"
        ],
        "responses": {
          "200": {
            "description": "Token refreshed successfully",
            "schema": {
              "$ref": "#/definitions/TokenRefreshResponse"
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "summary": "Logout user",
        "tags": [
          "Auth"
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SuccessResponse"
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/v1/users": {
      "get": {
        "summary": "Get all users",
        "tags": [
          "Users"
        ],
        "responses": {
          "200": {
            "description": "Returns a list of all users",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/User"
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a new user",
        "tags": [
          "Users"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/NewUser"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "User created successfully",
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        }
      }
    },
    "/api/v1/users/me": {
      "get": {
        "summary": "Get current user",
        "tags": [
          "Users"
        ],
        "parameters": [
          {
            "name": "include_teams",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "Returns the current user",
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/v1/users/me/sessions": {
      "get": {
        "tags": [
          "Sessions"
        ],
        "summary": "Get all active sessions for the current user",
        "security": [
          {
            "Bearer": []
          }
        ],
        "responses": {
          "200": {
            "description": "A list of active user sessions.",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/UserSession"
              }
            }
          }
        }
      }
    },
    "/api/v1/users/me/sessions/{session_id}": {
      "delete": {
        "tags": [
          "Sessions"
        ],
        "summary": "Delete a specific session",
        "security": [
          {
            "Bearer": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "The ID of the session to delete."
          }
        ],
        "responses": {
          "200": {
            "description": "Session deleted successfully."
          },
          "400": {
            "description": "Cannot delete the currently active session."
          },
          "404": {
            "description": "Session not found or permission denied."
          }
        }
      }
    },
    "/api/v1/users/me/sessions/all-except-current": {
      "delete": {
        "tags": [
          "Sessions"
        ],
        "summary": "Delete all sessions except the current one",
        "security": [
          {
            "Bearer": []
          }
        ],
        "responses": {
          "200": {
            "description": "All other sessions have been deleted."
          }
        }
      }
    },
    "/api/v1/users/{user_id}": {
      "get": {
        "summary": "Get a user by ID",
        "tags": [
          "Users"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "include_teams",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "Returns a single user",
            "schema": {
              "$ref": "#/definitions/User"
            }
          },
          "404": {
            "description": "User not found"
          }
        }
      },
      "put": {
        "summary": "Update a user",
        "tags": [
          "Users"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/UserUpdate"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User updated successfully",
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/v1/users/{user_id}/avatar": {
      "post": {
        "summary": "Upload a user avatar",
        "tags": [
          "Users"
        ],
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "avatar",
            "in": "formData",
            "type": "file",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Avatar uploaded successfully"
          }
        }
      }
    },
    "/api/v1/uploads/request-url": {
      "post": {
        "summary": "Request Presigned URL for Upload",
        "tags": [
          "Uploads"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "properties": {
                "contentType": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Presigned URL created"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/v1/teams": {
      "get": {
        "summary": "Get all teams",
        "tags": [
          "Teams"
        ],
        "responses": {
          "200": {
            "description": "Returns a list of all teams"
          }
        }
      },
      "post": {
        "summary": "Create a new team",
        "tags": [
          "Teams"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/NewTeam"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Team created successfully"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/v1/teams/{team_id}": {
      "get": {
        "summary": "Get a team by ID",
        "tags": [
          "Teams"
        ],
        "parameters": [
          {
            "name": "team_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Returns a single team"
          }
        }
      }
    },
    "/api/v1/teams/{team_id}/logo": {
      "post": {
        "summary": "Updates team logo",
        "tags": [
          "Teams"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "properties": {
                "fileUrl": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Logo updated"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/v1/teams/{team_id}/members/{user_id}": {
      "delete": {
        "summary": "Remove a team member",
        "tags": [
          "Teams"
        ],
        "parameters": [
          {
            "name": "team_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Member removed successfully"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/v1/teams/{team_id}/apply": {
      "post": {
        "summary": "Apply to a team",
        "tags": [
          "Teams"
        ],
        "parameters": [
          {
            "name": "team_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Application sent successfully"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/v1/teams/{team_id}/applications": {
      "get": {
        "summary": "Get team applications",
        "tags": [
          "Teams"
        ],
        "parameters": [
          {
            "name": "team_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Returns a list of applicants"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/v1/teams/{team_id}/applications/{user_id}/respond": {
      "post": {
        "summary": "Respond to a team application",
        "tags": [
          "Teams"
        ],
        "parameters": [
          {
            "name": "team_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/ApplicationResponse"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Response sent successfully"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/v1/teams/{team_id}/follow": {
      "post": {
        "summary": "Toggle follow a team",
        "tags": [
          "Teams"
        ],
        "parameters": [
          {
            "name": "team_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Follow status toggled"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/v1/sports": {
      "get": {
        "summary": "Get all sports",
        "tags": [
          "Sports"
        ],
        "responses": {
          "200": {
            "description": "A list of sports."
          }
        }
      },
      "post": {
        "summary": "Create a new sport",
        "tags": [
          "Sports"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/NewSport"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Sport created successfully"
          }
        }
      }
    },
    "/api/v1/playgrounds": {
      "get": {
        "summary": "Get all playgrounds",
        "tags": [
          "Legacy Playgrounds"
        ],
        "responses": {
          "200": {
            "description": "A list of playgrounds."
          }
        }
      },
      "post": {
        "summary": "Create a new playground",
        "tags": [
          "Legacy Playgrounds"
        ],
        "responses": {
          "201": {
            "description": "Playground created"
          }
        }
      }
    },
    "/api/v1/tournaments": {
      "get": {
        "summary": "Get all tournaments",
        "tags": [
          "Legacy Tournaments"
        ],
        "responses": {
          "200": {
            "description": "A list of tournaments."
          }
        }
      },
      "post": {
        "summary": "Create a new tournament",
        "tags": [
          "Legacy Tournaments"
        ],
        "responses": {
          "201": {
            "description": "Tournament created"
          }
        }
      }
    },
    "/api/v1/tournaments/{tournament_id}": {
      "get": {
        "summary": "Get a specific tournament",
        "tags": [
          "Legacy Tournaments"
        ],
        "responses": {
          "200": {
            "description": "A single tournament"
          }
        }
      }
    },
    "/api/v1/posts": {
      "get": {
        "summary": "Get all posts",
        "tags": [
          "Legacy Posts"
        ],
        "responses": {
          "200": {
            "description": "A list of posts."
          }
        }
      },
      "post": {
        "summary": "Create a new post",
        "tags": [
          "Legacy Posts"
        ],
        "responses": {
          "201": {
            "description": "Post created"
          }
        }
      }
    },
    "/api/v1/posts/{post_id}/comments": {
      "get": {
        "summary": "Get all comments for a post",
        "tags": [
          "Legacy Posts"
        ],
        "responses": {
          "200": {
            "description": "A list of comments for a post"
          }
        }
      },
      "post": {
        "summary": "Create a new comment on a post",
        "tags": [
          "Legacy Posts"
        ],
        "responses": {
          "201": {
            "description": "Comment created"
          }
        }
      }
    },
    "/api/v1/sponsors": {
      "get": {
        "summary": "Get all sponsors",
        "tags": [
          "Legacy Sponsors"
        ],
        "responses": {
          "200": {
            "description": "A list of sponsors."
          }
        }
      }
    },
    "/api/v1/achievements": {
      "get": {
        "summary": "Get all achievements",
        "tags": [
          "Legacy Achievements"
        ],
        "responses": {
          "200": {
            "description": "A list of achievements."
          }
        }
      }
    },
    "/api/v1/quests": {
      "get": {
        "summary": "Get all quests",
        "tags": [
          "Legacy Quests"
        ],
        "responses": {
          "200": {
            "description": "A list of quests."
          }
        }
      }
    },
    "/api/v1/profiles/player": {
      "get": {
        "summary": "Get all player profiles",
        "tags": [
          "Legacy Profiles"
        ],
        "responses": {
          "200": {
            "description": "A list of player profiles"
          }
        }
      }
    },
    "/api/v1/profiles/referee": {
      "get": {
        "summary": "Get all referee profiles",
        "tags": [
          "Legacy Profiles"
        ],
        "responses": {
          "200": {
            "description": "A list of referee profiles"
          }
        }
      }
    },
    "/api/v1/profiles/coach": {
      "get": {
        "summary": "Get all coach profiles",
        "tags": [
          "Legacy Profiles"
        ],
        "responses": {
          "200": {
            "description": "A list of coach profiles"
          }
        }
      }
    }
  },
  "securityDefinitions": {
    "bearerAuth": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header"
    }
  },
  "definitions": {
    "User": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "nickname": {
          "type": "string"
        },
        "email": {
          "type": "string"
        },
        "avatarUrl": {
          "type": "string"
        },
        "role": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "age": {
          "type": "integer"
        },
        "gender": {
          "type": "string"
        },
        "phone": {
          "type": "string"
        },
        "bio": {
          "type": "string"
        },
        "coverImageUrl": {
          "type": "string"
        },
        "teams": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Team"
          }
        },
        "player_profile": {
          "$ref": "#/definitions/PlayerProfile"
        }
      }
    },
    "UserUpdate": {
      "type": "object",
      "properties": {
        "nickname": {
          "type": "string"
        },
        "email": {
          "type": "string"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "gender": {
          "type": "string"
        },
        "age": {
          "type": "integer"
        },
        "phone": {
          "type": "string"
        },
        "bio": {
          "type": "string"
        },
        "sports": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "NewUser": {
      "type": "object",
      "properties": {
        "email": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "nickname": {
          "type": "string"
        },
        "role": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "age": {
          "type": "integer"
        },
        "gender": {
          "type": "string"
        }
      }
    },
    "Team": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "logoUrl": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "captainId": {
          "type": "string"
        },
        "sport_id": {
          "type": "string"
        },
        "members": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/User"
          }
        },
        "captain": {
          "$ref": "#/definitions/User"
        }
      }
    },
    "NewTeam": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "sport_id": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "logoUrl": {
          "type": "string"
        }
      }
    },
    "LoginResponse": {
      "type": "object",
      "properties": {
        "accessToken": {
          "type": "string"
        },
        "refreshToken": {
          "type": "string"
        },
        "user": {
          "$ref": "#/definitions/User"
        }
      }
    },
    "TokenRefreshResponse": {
      "type": "object",
      "properties": {
        "accessToken": {
          "type": "string"
        }
      }
    },
    "SuccessResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string"
        }
      }
    },
    "ApplicationResponse": {
      "type": "object",
      "properties": {
        "action": {
          "type": "string",
          "description": "accept or decline"
        }
      }
    },
    "NewSport": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "isTeamSport": {
          "type": "boolean"
        }
      }
    },
    "PlayerProfile": {
      "type": "object",
      "properties": {
        "matchesPlayed": {
          "type": "integer"
        },
        "wins": {
          "type": "integer"
        }
      }
    },
    "UserSession": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "isCurrent": {
          "type": "boolean"
        },
        "userAgent": {
          "type": "string"
        },
        "ipAddress": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "lastActiveAt": {
          "type": "string",
          "format": "date-time"
        }
      }
    }
  }
}
