
export const CONCEPT = `
# ProDvor - Концепция и Видение Платформы

Этот документ описывает миссию, ключевые фичи, бизнес-логику и игровой процесс (геймплей) платформы ProDvor. Он предназначен для всех участников проекта, чтобы обеспечить единое понимание целей и механик.

## 1. Концепция и Миссия

**ProDvor** — это цифровая экосистема, которая стирает границы между реальным дворовым спортом и любительским киберспортом.

**Миссия:** Предоставить каждому игроку, независимо от уровня мастерства и дисциплины, удобную и мотивирующую платформу для самореализации, соревнований и социального взаимодействия. Мы хотим превратить каждое локальное соревнование в значимое событие, а каждую команду — в настоящую легенду.

**Наша философия:** "Твоя игра. Твои правила. Твоя арена."

## 2. Архитектура данных: Роли и Профили

Ключевой аспект архитектуры — разделение **базовой аутентификации** от **ролевых данных**.

- **User (Пользователь):** Центральная сущность, отвечающая за вход, основные данные (имя, аватар) и социальные связи. У одного пользователя может быть несколько ролей.
- **Профили (\`PlayerProfile\`, \`RefereeProfile\` и т.д.):** Отдельные сущности, связанные с \`User\` через \`userId\`. Они хранят уникальные данные, специфичные для каждой роли.

Такой подход обеспечивает:
- **Гибкость:** Пользователь может иметь несколько ролей одновременно (например, быть "Игроком" и "Тренером"), и для каждой роли у него будет свой набор данных.
- **Масштабируемость:** Легко добавлять новые роли в будущем, не изменяя базовую таблицу \`User\`.
- **Чистота данных:** В основной сущности \`User\` нет полей, которые были бы \`NULL\` для большинства пользователей (например, поле "судейская категория" не нужно игроку).

## 3. Целевая Аудитория

1.  **Активные игроки:** Любители, играющие в футбол, баскетбол, волейбол на уличных площадках.
2.  **Капитаны и организаторы:** Энтузиасты, которые собирают команды и организуют локальные турниры.
3.  **Болельщики:** Друзья, родственники и просто зрители, которые следят за успехами команд.
4.  **Профессионалы:** Судьи, тренеры, менеджеры, которые ищут площадку для развития и применения своих навыков.

## 4. Ключевые Фичи

### 4.1. Единый Профиль (ProDvor ID)

- **Мульти-дисциплинарность:** Один профиль для всех видов спорта.
- **Статистика и достижения:** Подробная статистика по матчам, турнирам, индивидуальным показателям. Система ачивок.
- **Роли:** Пользователь может быть не только игроком, но и капитаном, тренером, судьей, организатором.

### 4.2. Команды

- **Создание и управление:** Полный функционал для капитана (приглашение игроков, управление составом, подача заявок на турниры).
- **Командный профиль:** Уникальная страница команды с логотипом (генерируемым AI), статистикой, историей матчей и составом.
- **Командный чат:** Внутренний мессенджер для координации.

### 4.3. Соревнования

- **Лиги и Турниры:** Регулярные соревнования с разными форматами (плей-офф, круговая система).
- **Вызовы (Challenges):** Возможность бросить вызов другой команде в любое время.
- **Автоматизированные сетки:** Удобные и наглядные турнирные таблицы, которые обновляются в реальном времени.

### 4.4. AI-Помощники

- **AI-Генератор логотипов:** Инструмент для создания уникальной айдентики команды на основе текстового описания.
- **AI-Аналитик матчей:** (В перспективе) Возможность загрузки видео матча для получения анализа ключевых моментов.
- **AI-Дайджест:** Автоматическая генерация новостей и сводок о прошедших и предстоящих играх.

### 4.5. Социальная Платформа

- **Лента новостей:** Посты от игроков и команд, анонсы матчей, результаты.
- **Поиск:** Умный поиск игроков, команд и турниров по различным критериям (город, вид спорта, уровень игры).
- **Система рейтинга:** Глобальный и локальный рейтинг для игроков и команд (ELO-подобная система).

### 4.6. Центр Судей (Referee Hub)

Это профессиональный инструмент для судей, который превращает их участие на платформе в полноценную карьеру. Доступен только пользователям с ролью "Судья".

**Миссия Центра:** Создать прозрачную и мотивирующую среду для роста и развития спортивных арбитров.

**Ключевые модули:**

1.  **Образовательная Платформа:**
    *   **Курсы повышения квалификации:** Видео-лекции, текстовые материалы и симуляторы спорных моментов (интерактивные тесты на основе видео).
    *   **Треки развития:** Персональные рекомендации по обучению в зависимости от выбранной дисциплины и текущей категории судьи.
    *   **Сертификация:** По окончании курсов выдаются цифровые сертификаты, которые отображаются в профиле.

2.  **База Знаний:**
    *   **Единый регламент:** Всегда актуальные версии правил по всем видам спорта, представленным на платформе.
    *   **Разбор кейсов:** Официальные трактовки сложных и спорных игровых ситуаций от экспертов ProDvor.
    *   **Быстрый поиск:** Удобная навигация и поиск по ключевым словам для оперативного нахождения нужного правила во время матча.

3.  **Аттестация и Рейтинг:**
    *   **Регулярное тестирование:** Онлайн-тесты для подтверждения и повышения судейской категории (например, с "Второй" до "Первой").
    *   **Публичный рейтинг судей:** Рейтинг, основанный на категории, количестве проведенных матчей и оценках от организаторов и капитанов команд.
    *   **Доступ к матчам:** Высокий рейтинг и категория открывают доступ к судейству более престижных турниров с большим призовым фондом.

## 5. Бизнес-логика и Монетизация

Платформа будет бесплатной для основного функционала, чтобы привлечь максимальное количество пользователей. Монетизация планируется через:

1.  **Pro-аккаунты (Подписка):**
    - Расширенная статистика.
    - Дополнительные попытки генерации логотипов.
    - Кастомизация профиля и командной страницы.
    - Доступ к премиальным AI-инструментам (анализ видео).
    - **Доступ к продвинутым курсам в Центре Судей.**

2.  **Организаторские инструменты:**
    - Платные пакеты для организаторов турниров (брендирование, увеличенное количество участников, призовые фонды от платформы).

3.  **Встроенный магазин (Marketplace):**
    - Продажа виртуальных предметов (уникальные рамки, значки, кастомные лого).
    - Партнерство с брендами спортивной атрибутики и инвентаря.

4.  **Спонсорство:**
    - Привлечение спонсоров для крупных лиг и турниров.

## 6. Игровой Процесс (Gameplay Loop)

1.  **Регистрация:** Пользователь создает свой ProDvor ID.
2.  **Онбординг:** Пользователь указывает свои любимые дисциплины, уровень игры и цели на платформе.
3.  **Присоединение/Создание команды:** Пользователь находит команду или создает свою, приглашая друзей.
4.  **Первый матч:** Команда бросает вызов другой команде или регистрируется на свой первый турнир.
5.  **Прогресс:** За участие и победы команда и игроки получают очки рейтинга, открывают достижения. Судьи повышают свою квалификацию в **Центре Судей**.
6.  **Социализация:** Игроки делятся успехами в ленте, общаются, следят за другими командами.
7.  **Рост:** Команда поднимается в рейтинге, участвует в более престижных лигах и борется за реальные призы.
8.  **Цикл повторяется:** Новые сезоны, новые турниры, новые вызовы поддерживают постоянный интерес.

## 7. Система прогрессии: Очки Прогресса (ОП)

Очки Прогресса (ОП, англ. Progress Points, PP) — это основа системы геймификации, не связанная с ELO-рейтингом. ОП начисляются за любую полезную активность на платформе, мотивируя пользователей взаимодействовать с различными ее частями.

-   **Назначение:** Открытие достижений, повышение уровня аккаунта, разблокировка косметических наград.
-   **Логика:** Бэкенд должен иметь сервис, который принимает события от других сервисов (например, "матч завершен", "пост создан") и начисляет соответствующее количество очков.

**Таблица начисления Очков Прогресса:**

| Событие                         | Код события                  | Очки | Описание                                        |
| ------------------------------- | ---------------------------- | ---- | ----------------------------------------------- |
| **Соревнования**                |                              |      |                                                 |
| Участие в матче                 | \`match_participation\`      | 50   | Начисляется каждому участнику после матча.       |
| Победа в матче                  | \`match_win\`                | 100  | Бонус к участию за победу.                      |
| Участие в турнире               | \`tournament_participation\` | 250  | Начисляется после первого сыгранного матча.      |
| Победа в турнире                | \`tournament_win\`           | 1000 | Начисляется команде-победителю.                  |
| **Тренировки**                  |                              |      |                                                 |
| Тренировка завершена            | \`training_completed\`       | 75   | За завершение тренировки по плану.              |
| План тренировок создан          | \`fitness_plan_created\`     | 150  | За создание и сохранение нового плана.          |
| **Социальная активность**       |                              |      |                                                 |
| Пост создан                     | \`post_created\`             | 10   |                                                 |
| Комментарий создан              | \`comment_created\`          | 5    |                                                 |
| Подписка на пользователя        | \`profile_followed\`         | 1    |                                                 |
| Подписка на команду             | \`team_followed\`            | 5    |                                                 |
| **Достижения**                  |                              |      |                                                 |
| Достижение открыто              | \`achievement_unlocked\`     | 200  |                                                 |
| **Вклад в платформу**           |                              |      |                                                 |
| Новая площадка добавлена        | \`playground_added\`         | 300  | Начисляется после успешной модерации.           |
| Команда создана                 | \`team_created\`             | 100  |                                                 |

## 8. Система рейтинга ELO

Система рейтинга Эло — это метод для расчёта относительной силы игроков/команд.

-   **Назначение:** Обеспечение справедливого матчмейкинга, формирование лиг и таблиц лидеров, отслеживание соревновательного роста.
-   **Логика:** После каждого официального матча (турнирного или рейтингового вызова) бэкенд должен пересчитывать ELO-рейтинги обеих команд.

**Ключевые принципы:**

-   **Разница в рейтингах** позволяет предсказать ожидаемый результат матча.
-   **Рейтинг обновляется** после каждого матча на основе фактического и ожидаемого результатов.
-   За победу над **более сильным** соперником дается **больше** очков, чем за победу над **более слабым**.
-   **K-фактор:** Определяет, насколько сильно результат одного матча влияет на изменение рейтинга. Для нашей платформы используется \`K_FACTOR = 32\`, что является стандартным значением для новых и активно играющих систем.

**Формула расчета:**

1.  **Ожидаемый результат (вероятность победы) для Команды А:**
    \`\`\`
    ExpectedScore(A) = 1 / (1 + 10^((Rating(B) - Rating(A)) / 400))
    \`\`\`
2.  **Обновление рейтинга для Команды А:**
    \`\`\`
    NewRating(A) = Rating(A) + K_FACTOR * (ActualScore(A) - ExpectedScore(A))
    \`\`\`
    Где \`ActualScore\` = 1 для победы, 0.5 для ничьей, 0 для поражения.

Эта логика должна быть инкапсулирована в отдельном сервисе, который вызывается после подтверждения результатов матча.

## 9. Архитектура будущих микросервисов

Для обеспечения масштабируемости, гибкости и независимой разработки ключевые модули платформы ProDvor спроектированы с возможностью их выделения в отдельные микросервисы.

### 9.1. Admin Core & Simulation Service

-   **Назначение:** Сердце административной панели. Отвечает за управление основными сущностями платформы.
-   **Зона ответственности:**
    -   CRUD-операции для пользователей, команд, спонсоров, площадок.
    -   Управление ролями и правами доступа.
    -   Реализация функционала "Симуляции" (возможность войти под видом другого пользователя).
    -   Сбор и агрегация данных для дашбордов в админ-панели.

### 9.2. Tournament CRM Service

-   **Назначение:** Комплексный сервис для управления жизненным циклом соревнований.
-   **Зона ответственности:**
    -   Создание и настройка турниров (формат, правила, расписание).
    -   Управление регистрацией участников и подтверждение заявок.
    -   Генерация и обновление турнирных сеток (brackets).
    -   Ведение протоколов матчей в реальном времени.
    -   Управление персоналом турнира (судьи, организаторы).
    -   Интеграция с сервисом финансов для учета взносов.

### 9.3. Gamification & Ranking Service

-   **Назначение:** Сервис, отвечающий за все игровые и соревновательные механики, повышающие вовлеченность пользователей.
-   **Зона ответственности:**
    -   Расчет и обновление рейтинга ELO для игроков и команд после каждого матча.
    -   Управление системой рангов и их присвоение.
    -   Трекинг и выдача достижений (ачивок).
    -   Начисление "Очков Прогресса" за различные действия на платформе (участие в матче, создание поста и т.д.), как описано в \`/src/shared/lib/gamification.ts\`.

### 9.4. Ad-CRM Service (Сервис Монетизации)

-   **Назначение:** Сервис для управления монетизацией платформы через рекламный инвентарь.
-   **Зона ответственности:**
    1.  **Управление рекламным инвентарем:**
        *   Создание и управление рекламными слотами (баннер в ленте, брендирование турнира и т.д.).
        *   Интерактивная "Карта инвентаря", показывающая доступность и статистику по каждому слоту.
    2.  **Менеджер Кампаний:**
        *   Создание, запуск, приостановка и архивация рекламных кампаний.
        *   Загрузка креативов (баннеров).
        *   Привязка кампаний к определенным аудиторным сегментам.
    3.  **Менеджер Аудиторий:**
        *   Создание пользовательских сегментов на основе множества критериев (дисциплина, роль, ELO-рейтинг, география, возраст).
        *   Расчет потенциального охвата и прогнозируемого дохода для каждого сегмента.
    4.  **Аналитика и Прогнозирование:**
        *   Сбор статистики по показам, кликам и доходу (CTR, eCPM, Fill-rate).
        *   **Интерактивный симулятор дохода:** Бэкенд должен предоставлять эндпоинт, который принимает на вход базовые параметры (MAU, eCPM, Fill-rate) и "рычаги роста" (активированные стратегии), а на выходе отдает полный финансовый прогноз: годовой доход, его распределение, анализ чувствительности и квартальный план.
        *   Расчет окупаемости на основе прогнозируемого EBITDA.
`;

export const README = `
# ProDvor - Техническая документация

Этот документ описывает архитектуру, технологии и соглашения, принятые в проекте ProDvor. Цель этой документации — обеспечить единое понимание структуры проекта для всех разработчиков и упростить процесс добавления нового функционала.

## 1. Стек технологий

- **Фреймворк:** [Next.js](https://nextjs.org/) (App Router)
- **Язык:** [TypeScript](https://www.typescriptlang.org/)
- **UI-компоненты:** [ShadCN/UI](https://ui.shadcn.com/)
- **Стилизация:** [Tailwind CSS](https://tailwindcss.com/)
- **Формы:** [React Hook Form](https://react-hook-form.com/) + [Zod](https://zod.dev/)
- **Стейт-менеджер:** [Zustand](https://github.com/pmndrs/zustand)

## 2. Архитектура проекта

Проект структурирован по принципам, близким к **Feature-Sliced Design (FSD)**, что обеспечивает слабую связанность модулей и высокую переиспользуемость кода.

### Ключевые слои:

- **\`/src/app\` (Слой инициализации и роутинга):**
  - **Назначение:** Основа роутинга в Next.js App Router. Здесь определяются URL-адреса, корневые макеты и глобальные стили.
  - **Содержимое:**
    - \`layout.tsx\`: Корневой макет приложения.
    - \`globals.css\`: Глобальные стили и переменные тем Tailwind CSS.
    - \`/(main)\` и \`/admin\`: Группы маршрутов для разделения публичной/внутренней части и админ-панели.
    - \`actions.ts\`: **Server Actions**, обеспечивающие безопасное взаимодействие клиентских компонентов с серверной логикой.

- **\`/src/views\` (Слой страниц):**
  - **Назначение:** "Сборка" страниц из виджетов и сущностей. Компоненты в этой директории не содержат собственной бизнес-логики, а только композируют нижележащие слои для отображения конкретной страницы.
  - **Пример:** \`HomePage\` (\`/src/views/home/ui/index.tsx\`) собирает виджеты \`Header\`, \`Footer\` и контентные блоки для главной страницы.

- **\`/src/widgets\` (Слой виджетов):**
  - **Назначение:** Крупные, самостоятельные и переиспользуемые блоки интерфейса. Виджеты могут иметь свою UI-логику и работать с данными.
  - **Пример:** \`DashboardSidebar\`, \`LogoGeneratorWidget\`, \`FitnessSchedule\`. Каждый из этих виджетов представляет собой законченный функциональный блок.

- **\`/src/entities\` (Слой сущностей):**
  - **Назначение:** Бизнес-сущности и компоненты для их отображения.
  - **Пример:** Карточка команды (\`TeamCard\`), карточка пользователя (\`UserBadge\`), и **модели состояния Zustand** (\`/src/entities/training/model/use-plan-store.ts\`).

- **\`/src/shared\` (Слой общих утилит):**
  - **Назначение:** Самый нижний слой архитектуры. Содержит код, который может быть использован в любой части приложения.
  - **Подпапки:**
    - \`api\`: Функции для взаимодействия с внешними сервисами (на данный момент — **моки**).
    - \`ui\`: Базовые UI-компоненты (кнопки, поля ввода) из ShadCN/UI.
    - \`lib\`: Вспомогательные утилиты (например, \`cn\`, \`rating\`).
    - \`hooks\`: Переиспользуемые React-хуки (например, \`useToast\`).

## 3. State Management (Zustand)

Для управления глобальным состоянием используется **Zustand**. Это позволяет избежать "прокидывания" пропсов и создать легковесные, изолированные хранилища (сторы).

- **Расположение:** Сторы находятся в слое \`entities\` рядом с бизнес-сущностью, к которой они относятся (например, \`entities/training/model/use-plan-store.ts\`).
- **Ключевые сторы:**
  - \`useUserStore\`: Управляет симуляцией текущего пользователя для админ-панели.
  - \`usePlanStore\`, \`useScheduleStore\`, \`useSessionStore\`: Управляют состоянием конструктора тренировок.
  - \`useProtocol\`: Управляет состоянием редактора протокола матча в реальном времени.
- **Persistence:** Некоторые сторы (например, \`useUserStore\`) используют \`persist middleware\` для сохранения состояния между перезагрузками страницы в \`sessionStorage\` или \`localStorage\`.

## 4. Стилизация

- **Основа:** Используется **Tailwind CSS** с конфигурацией из \`tailwind.config.ts\`.
- **UI-компоненты:** Все базовые компоненты (кнопки, карточки) взяты из **ShadCN/UI** и лежат в \`/src/shared/ui\`. Они полностью кастомизируемы.
- **Темизация:** Цветовая схема и радиусы скругления определяются через CSS-переменные в \`src/app/globals.css\`. Это позволяет легко создавать и переключать темы (светлая/темная и акцентные цвета).
- **Классы:** Для условного объединения классов используется утилита \`cn\` из \`/src/shared/lib/utils.ts\`. **Всегда используйте ее** при работе с классами Tailwind.

## 5. Работа с данными и мокирование

На текущем этапе прототип работает **полностью на моковых данных**, что позволяет вести разработку независимо от бэкенда.

- **Источник данных:** Директория \`/src/mocks\`.
- **Структура:**
  - Файлы сущностей (\`users.ts\`, \`teams.ts\`) содержат "сырые" массивы данных.
  - \`initialize.ts\`: **Центральный инициализатор.** Он импортирует все сырые данные и устанавливает между ними связи (кто в какой команде, кто на кого подписан и т.д.).
  - \`index.ts\`: Точка входа, которая запускает инициализатор и экспортирует уже готовые, связанные данные.
- **Переход на бэкенд:** Для перехода на реальный API потребуется заменить логику в \`initialize.ts\` и \`shared/api/*.ts\` на \`fetch\`-запросы, не затрагивая UI-компоненты.

## 6. Server Actions

Для взаимодействия клиентских компонентов с "серверной" логикой (в нашем случае — с моковыми AI-функциями) используются **Next.js Server Actions**.

- **Расположение:** Основной файл — \`/src/app/actions.ts\`.
- **Принцип работы:**
  1. В \`actions.ts\` объявляется асинхронная функция с директивой \`"use server";\`.
  2. Эта функция импортируется в любой клиентский компонент (\`"use client";\`).
  3. Вызов этой функции с клиента автоматически выполняет ее на сервере, обеспечивая безопасность.
  - **Пример:** \`generateLogosAction\` в \`actions.ts\` вызывает моковую AI-функцию и возвращает результат на клиент.

## 7. Роутинг

- **App Router:** Проект использует файловый роутинг Next.js App Router.
- **Группы маршрутов:**
  - \`(main)\`: Основная группа для публичных страниц и дашборда пользователя.
  - \`admin\`: Группа для страниц админ-панели.
- **Разделение лейаутов:** В файле \`/src/app/(main)/layout.tsx\` находится логика, которая определяет, какой макет отображать: публичный (для главной, страницы "о нас", авторизации) или внутренний с боковым меню (для дашборда и других защищенных страниц).

## 8. AI-функции (Моки)

- Все "умные" функции (генерация логотипов, анализ матчей) на данном этапе являются **моками (заглушками)**.
- Функции, имитирующие работу AI, находятся в \`/src/shared/api/\`. Они не делают реальных запросов, а возвращают заранее подготовленные данные с имитацией задержки (\`setTimeout\`).
- Это позволяет разрабатывать и тестировать UI без подключения к реальным AI-моделям, что значительно ускоряет и удешевляет разработку.

## 9. Следующие шаги для команды разработки

Этот прототип и сопутствующая документация являются отправной точкой для полноценной разработки. Вот что понадобится команде для начала работы:

1.  **Схема Базы Данных:**
    *   API-документация описывает структуру данных в формате JSON. Бэкенд-команде необходимо будет спроектировать и реализовать реляционную (или NoSQL) схему базы данных, которая будет эффективно хранить эти данные. Рекомендуется использовать инструменты вроде Prisma или TypeORM для описания схемы.

2.  **Переменные Окружения (\`.env\`):**
    *   Необходимо создать файл \`.env.template\`, в котором будут перечислены все переменные, необходимые для запуска проекта: строки подключения к БД, секретные ключи для JWT, API-ключи для внешних сервисов (AI, карты и т.д.).

3.  **CI/CD (Непрерывная интеграция и развертывание):**
    *   Следует настроить пайплайны для автоматической сборки, тестирования и развертывания приложения на dev/staging/production-окружения.

4.  **Стратегия Тестирования:**
    *   Необходимо определить подход к тестированию: unit-тесты для утилит и сложной логики, интеграционные тесты для API-эндпоинтов и E2E-тесты для ключевых пользовательских сценариев (регистрация, создание команды, участие в турнире).

5.  **Управление проектом (Agile):**
    *   Рекомендуется разбить функционал, описанный в "Концепции", на пользовательские истории (User Stories) и организовать работу по спринтам в системе управления задачами (например, Jira, Trello).

6.  **UI Kit и Storybook:**
    *   Хотя используется ShadCN/UI, рекомендуется создать Storybook для всех кастомных компонентов и виджетов. Это поможет поддерживать консистентность интерфейса и упростит разработку новых фич.
`;
    

    




